--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX Criando SCHEMA XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

-- DROP SCHEMA IF EXISTS gestor;
CREATE SCHEMA IF NOT EXISTS gestor AUTHORIZATION postgres;
GRANT ALL ON SCHEMA gestor TO postgres;



--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX Criando a SEQUENCE e TABLE endereco XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

-- DROP SEQUENCE gestor.sq_endereco;
CREATE SEQUENCE gestor.sq_endereco
  INCREMENT 1
  MINVALUE 0
  MAXVALUE 2147483647
  START 1
  CACHE 1;
ALTER TABLE gestor.sq_endereco
  OWNER TO postgres;
GRANT ALL ON SEQUENCE gestor.sq_endereco TO postgres;


-- DROP TABLE gestor.endereco;
CREATE TABLE gestor.endereco
(
  id integer NOT NULL DEFAULT nextval('gestor.sq_endereco'::regclass),
  logradouro character varying(250) NOT NULL,
  bairro character varying(100) NOT NULL,
  cep character varying(9) NOT NULL,
  numero integer,
  complemento character varying(500),  
  excluido boolean NOT NULL DEFAULT false,
  CONSTRAINT pk_endereco PRIMARY KEY (id)
)
WITH (
  OIDS=FALSE
);
ALTER TABLE gestor.endereco
  OWNER TO postgres;
GRANT ALL ON TABLE gestor.endereco TO postgres;



--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX Criando a SEQUENCE e TABLE pessoa XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
--XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

-- DROP SEQUENCE gestor.sq_pessoa;
CREATE SEQUENCE gestor.sq_pessoa
  INCREMENT 1
  MINVALUE 0
  MAXVALUE 2147483647
  START 1
  CACHE 1;
ALTER TABLE gestor.sq_pessoa
  OWNER TO postgres;
GRANT ALL ON SEQUENCE gestor.sq_pessoa TO postgres;


-- DROP TABLE gestor.pessoa;
CREATE TABLE gestor.pessoa
(
  id integer NOT NULL DEFAULT nextval('gestor.sq_pessoa'::regclass),
  nome character varying(150) NOT NULL,
  email character varying(50),
  cpf character varying(11) NOT NULL,
  id_endereco integer NOT NULL,
  excluido boolean NOT NULL DEFAULT false,
  CONSTRAINT pk_pessoa PRIMARY KEY (id),
  CONSTRAINT fk_endereco_x_pessoa FOREIGN KEY (id_endereco)
      REFERENCES gestor.endereco (id) MATCH FULL
      ON UPDATE NO ACTION ON DELETE NO ACTION
)
WITH (
  OIDS=FALSE
);
ALTER TABLE gestor.pessoa
  OWNER TO postgres;
GRANT ALL ON TABLE gestor.pessoa TO postgres;




